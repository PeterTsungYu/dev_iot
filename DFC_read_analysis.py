import numpy as np

def error_percentage(signal, watch_DFM, setting):
    lst = signal
    DFM = np.array(watch_DFM)
    arr = np.array([i[5:] for i in lst])
    #print(np.mean(arr, axis=1))

    print(f"Setting MFC as {setting} SLPM")
    print("the error percentage for 1 min, 3 min, 5 min are respectively...")
    print(f"{round(np.mean((DFM - np.mean(arr, axis=1))[0]) / setting * 100, 3)} %")
    print(f"{round(np.mean((DFM - np.mean(arr, axis=1))[:3]) / setting * 100, 3)} %")
    print(f"{round(np.mean(DFM - np.mean(arr, axis=1)) / setting * 100, 3)} %")
    print('-'*30)

# setting for MFC
setting = np.arange(10, 160, 10)

# DFM signals to RPi 
signal_10 = [[11.32, 11.09, 11.12, 10.93, 10.88, 10.68, 10.96, 10.45, 10.62, 10.79], [10.86, 10.81, 10.67, 10.75, 10.58, 10.67, 10.52, 11.03, 10.71, 10.55], [9.3, 9.32, 9.1, 9.2, 9.03, 8.89, 8.97, 9.09, 9.34, 9.26], [10.49, 10.42, 10.05, 10.31, 10.23, 9.99, 10.16, 9.9, 10.0, 10.19], [11.43, 11.38, 11.2, 11.28, 11.23, 11.29, 11.04, 11.0, 11.24, 11.18]]
signal_20 = [[21.89, 21.57, 21.64, 21.5, 21.37, 21.48, 21.51, 21.16, 21.47, 21.26], [19.57, 19.45, 19.32, 19.15, 19.08, 19.14, 19.03, 18.69, 19.04, 18.56], [21.97, 21.94, 21.89, 21.75, 21.66, 21.66, 21.73, 21.7, 21.54, 21.53], [20.11, 19.97, 19.83, 19.83, 19.69, 19.72, 19.63, 19.25, 19.6, 18.93], [20.79, 20.65, 20.7, 20.54, 20.58, 20.89, 21.05, 20.32, 20.79, 20.49]]
signal_30 = [[31.52, 31.16, 31.05, 30.82, 30.84, 30.71, 30.73, 30.49, 30.61, 30.65], [31.45, 31.21, 31.02, 30.82, 30.76, 30.7, 30.43, 30.52, 30.55, 30.67], [30.36, 30.08, 29.86, 30.0, 29.78, 29.69, 29.72, 29.98, 29.54, 29.05], [31.05, 30.47, 30.31, 30.08, 29.65, 29.54, 29.71, 29.63, 29.48, 29.51], [31.26, 30.87, 30.76, 30.73, 30.55, 30.48, 30.1, 30.27, 30.36, 30.35]]
signal_40 = [[41.32, 40.77, 40.46, 40.32, 40.34, 40.24, 40.08, 40.01, 40.11, 40.15], [42.36, 41.75, 41.82, 41.43, 41.12, 41.01, 40.79, 40.9, 41.14, 41.0], [42.37, 42.02, 41.57, 41.7, 41.38, 41.29, 40.97, 41.45, 41.16, 41.24], [41.81, 41.35, 41.08, 40.98, 40.87, 40.78, 40.86, 40.56, 40.68, 40.65], [41.35, 41.07, 40.88, 40.58, 40.68, 40.41, 40.28, 40.57, 40.63, 40.58]]
signal_50 = [[51.43, 50.9, 50.55, 50.42, 50.3, 50.13, 50.12, 50.08, 49.92, 50.08], [53.04, 52.53, 52.18, 52.13, 51.99, 51.83, 51.72, 51.91, 51.72, 51.72], [50.82, 50.46, 50.08, 49.74, 49.76, 49.54, 49.68, 49.5, 49.69, 49.8], [53.44, 52.72, 52.57, 52.2, 52.08, 52.04, 51.85, 51.99, 51.88, 51.87], [50.82, 50.17, 50.11, 49.86, 49.84, 49.55, 49.52, 49.85, 49.87, 49.89]]
signal_60 = [[63.05, 62.38, 62.09, 61.68, 61.7, 61.96, 61.72, 61.21, 61.42, 61.69], [63.1, 62.41, 62.02, 61.79, 61.51, 61.56, 61.34, 61.41, 61.01, 61.34], [61.7, 60.66, 60.33, 59.94, 60.1, 59.96, 59.78, 59.59, 59.6, 59.53], [63.35, 62.2, 62.16, 61.77, 61.68, 61.44, 61.48, 61.05, 61.44, 61.37], [63.63, 62.78, 62.85, 62.59, 62.43, 62.15, 62.06, 62.3, 61.97, 62.1]]
signal_70 = [[72.78, 71.78, 71.23, 71.02, 70.8, 70.47, 70.2, 70.7, 70.51, 70.52], [73.49, 72.22, 71.97, 71.56, 71.35, 70.98, 71.14, 70.86, 70.9, 71.03], [72.89, 71.8, 71.3, 71.38, 71.05, 70.69, 71.09, 70.65, 70.57, 70.73], [73.48, 72.25, 71.85, 71.53, 71.5, 70.77, 70.98, 70.72, 70.87, 71.14], [73.4, 72.2, 71.61, 71.53, 71.6, 70.86, 71.19, 70.81, 70.76, 71.0]]
signal_80 = [[83.63, 82.3, 82.0, 81.6, 81.22, 81.2, 81.08, 80.56, 81.08, 81.3], [84.18, 82.6, 82.25, 81.78, 81.63, 81.56, 81.61, 81.47, 81.29, 81.39], [84.95, 83.64, 83.29, 82.93, 82.83, 82.42, 82.59, 82.52, 82.37, 82.4], [83.03, 81.88, 81.56, 81.12, 81.04, 80.98, 81.3, 80.54, 81.1, 80.72], [83.01, 81.51, 81.1, 80.93, 80.94, 80.67, 80.69, 80.77, 80.63, 80.57]]
signal_90 = [[94.47, 92.79, 92.36, 91.74, 91.59, 91.57, 91.4, 91.3, 91.27, 91.32], [95.68, 93.68, 93.11, 92.68, 92.37, 92.18, 92.08, 92.56, 92.18, 91.91], [94.21, 92.83, 92.28, 92.11, 91.77, 91.69, 90.85, 91.47, 91.41, 91.32], [94.19, 92.39, 92.0, 91.36, 91.45, 91.17, 91.23, 91.17, 90.93, 91.06], [95.88, 93.88, 93.41, 93.08, 93.1, 92.8, 92.49, 92.13, 92.61, 92.66]]
signal_100 = [[106.27, 103.77, 103.31, 102.66, 102.4, 102.29, 101.71, 101.6, 101.86, 101.72], [104.56, 102.18, 101.66, 101.18, 101.21, 100.69, 100.77, 100.98, 100.8, 100.92], [104.63, 103.09, 102.51, 102.31, 102.01, 101.98, 101.57, 101.16, 101.59, 101.62], [106.58, 103.89, 103.51, 102.83, 102.74, 102.66, 103.15, 102.46, 102.42, 102.33], [105.12, 103.07, 103.01, 102.61, 102.44, 102.36, 102.38, 102.19, 102.28, 102.1]]
signal_110 = [[116.36, 113.59, 112.95, 112.71, 112.25, 111.98, 111.94, 111.67, 111.67, 111.68], [117.18, 113.86, 113.58, 113.14, 112.87, 112.24, 112.11, 111.86, 111.79, 112.3], [116.21, 113.55, 112.93, 112.44, 112.05, 111.95, 112.18, 111.83, 111.89, 111.6], [116.15, 112.91, 112.23, 112.09, 111.8, 111.48, 111.38, 111.82, 111.3, 111.34], [115.6, 112.9, 112.15, 111.93, 111.87, 111.42, 111.19, 111.23, 111.15, 111.67]]
signal_120 = [[127.95, 123.91, 122.98, 122.48, 121.94, 121.9, 121.54, 121.67, 121.57, 121.6], [128.86, 125.04, 124.19, 123.83, 123.47, 123.14, 123.0, 122.97, 123.1, 122.92], [125.75, 122.62, 121.94, 121.78, 121.4, 121.3, 120.15, 121.14, 120.91, 121.16], [128.01, 124.43, 123.75, 123.39, 122.84, 122.62, 122.4, 122.33, 122.69, 122.45], [127.09, 123.77, 123.19, 122.66, 122.2, 121.9, 121.65, 121.59, 121.63, 121.67]]
signal_130 = [[139.18, 134.37, 133.49, 133.11, 132.47, 132.19, 132.34, 132.39, 132.18, 132.14], [138.6, 134.51, 133.26, 132.81, 132.91, 132.32, 132.5, 132.41, 131.97, 132.0], [139.38, 134.87, 134.25, 134.01, 133.48, 133.11, 133.44, 133.07, 132.82, 132.93], [137.82, 133.32, 132.85, 131.99, 131.98, 131.5, 131.39, 131.34, 131.53, 131.56], [137.39, 132.68, 132.39, 131.57, 131.55, 131.12, 130.96, 130.77, 131.29, 131.21]]
signal_140 = [[149.55, 144.08, 143.7, 142.88, 142.75, 142.38, 142.28, 142.01, 142.13, 141.77], [148.65, 144.42, 143.24, 142.89, 143.09, 142.01, 142.23, 141.6, 141.91, 142.39], [150.11, 144.84, 143.39, 143.4, 142.34, 142.54, 142.11, 142.16, 142.12, 142.02], [149.14, 144.16, 143.03, 142.86, 142.66, 141.7, 142.22, 141.74, 141.88, 142.01], [149.65, 144.58, 143.55, 143.03, 142.67, 142.26, 141.97, 141.96, 141.78, 141.91]]
signal_150 = [[160.83, 153.85, 153.07, 152.2, 151.93, 151.41, 151.37, 151.13, 151.18, 151.34], [162.78, 155.79, 154.36, 154.28, 153.56, 153.24, 153.32, 153.43, 152.69, 153.12], [161.8, 154.19, 153.6, 152.83, 152.12, 151.8, 151.84, 152.06, 151.97, 151.62], [161.58, 154.41, 152.96, 152.65, 152.47, 151.58, 151.41, 151.62, 151.24, 151.55], [163.51, 156.13, 154.74, 153.92, 153.42, 152.86, 153.45, 152.42, 152.45, 152.8]]
signal_lst = [signal_10, signal_20, signal_30, signal_40, signal_50, signal_60, signal_70, signal_80, signal_90, signal_100, signal_110, signal_120, signal_130, signal_140, signal_150]

# human eyes watch DFM 
watch_DFM_10 = [11, 10.7, 9.3, 10, 11]
watch_DFM_20 = [21.5, 18.5, 21, 19.5, 20.5]
watch_DFM_30 = [31.5, 30.5, 29, 30, 30]
watch_DFM_40 = [41.2, 40.8, 40.5, 40.5, 40]
watch_DFM_50 = [51, 51, 49.5, 51, 50]
watch_DFM_60 = [62, 61, 59.5, 60, 62.5]
watch_DFM_70 = [71.5, 70.5, 70, 70.5, 71.5]
watch_DFM_80 = [80, 81.5, 81.5, 80.5, 79.5]
watch_DFM_90 = [90, 91.5, 91, 90.5, 91.5]
watch_DFM_100 = [101, 100.5, 100.5, 101, 102]
watch_DFM_110 = [112.5, 110.5, 111.5, 110.5, 109.5]
watch_DFM_120 = [120.5, 122, 119.5, 122, 121]
watch_DFM_130 = [130, 131.5, 131.5, 132, 130]
watch_DFM_140 = [141, 142, 140, 141, 140.5]
watch_DFM_150 = [152.5, 151.5, 151, 150, 153]
watch_DFM_lst = [watch_DFM_10, watch_DFM_20, watch_DFM_30, watch_DFM_40, watch_DFM_50, watch_DFM_60, watch_DFM_70, watch_DFM_80, watch_DFM_90, watch_DFM_100, watch_DFM_110, watch_DFM_120, watch_DFM_130, watch_DFM_140, watch_DFM_150]

for i in range(15):
    error_percentage(signal_lst[i], watch_DFM_lst[i], setting[i])